!function(){"use strict";let e={secureMode:!1,authorizedChatbots:["https://codimd.apps.education.fr/d3yEseF3RtWzeW3vcgn4MQ"],defaultMessage:["Désolé, je ne comprends pas votre question.","Pardonnez-moi, mais je ne saisis pas votre demande.","Excusez-moi, je ne parviens pas à comprendre ce que vous demandez.","Je suis navré, mais je ne parviens pas à saisir votre question.","Malheureusement, je ne suis pas en mesure de comprendre votre question.","Je suis désolé, mais je ne saisis pas votre question.","Pardonnez-moi, mais je ne saisis pas le sens de votre question.","Je m'excuse, mais je ne parviens pas à saisir votre demande. Pouvez-vous reformuler votre question, s'il vous plaît ?","Je ne suis pas sûr de comprendre ce que vous demandez. Pouvez-vous expliquer davantage ?","Je ne peux pas répondre à votre question telle qu'elle est formulée. Pouvez-vous la poser différemment ?","Votre question ne semble pas correspondre à mes capacités actuelles. Pourriez-vous la reformuler autrement ?","Je n'ai malheureusement pas compris votre requête.","Je suis désolé, je ne suis pas capable de répondre.","Malheureusement, je ne peux pas répondre à votre question.","Malheureusement je n'arrive pas à comprendre votre requête.","Excusez-moi, je ne comprends pas votre requête.","Excusez-moi, je n'arrive pas à répondre à votre question.","Je ne parviens pas à répondre à votre requête. Veuillez m'excuser."],badWordsMessage:["Même si je ne suis qu'un chatbot, merci de vous adresser à moi avec un langage approprié","Je préférerais que nous restions courtois dans notre communication.","Les insultes ne sont pas nécessaires. Comment puis-je vous aider autrement ?","Essayons de garder une conversation respectueuse.","Je préfère une conversation respectueuse et productive.","Je vous encourage à reformuler votre question ou commentaire de manière respectueuse.","Les mots offensants ne sont pas nécessaires ici. Comment puis-je vous aider de manière constructive ?","Restons courtois dans nos échanges, s'il vous plaît.","Injures et grossièretés ne mènent nulle part. Comment puis-je vous assister ?","Je suis ouvert à la discussion, mais veuillez garder un langage respectueux.","Essayons de communiquer de manière civilisée !"],shortcuts:[["dissertation-philo","https://raw.githubusercontent.com/eyssette/chatbot/main/dissertation-philosophie.md"],["multiple-urls",["https://codimd.apps.education.fr/t7yi1Ak7Q--r2r4oB-3Uhg/download","https://codimd.apps.education.fr/fqjqvdIkQvWD-PVGONrq2g/download"]]],corsProxy:"https://corsproxy.io/?",responsesTitles:["## "],allowedAddOns:{pako:{js:"externals/pako.min.js"},kroki:{js:"externals/kroki.js"},textFit:{js:"externals/textFit.min.js",css:"<style>.katex-display{max-width:80%} .katex-display .textFitted{white-space:nowrap}</style>"}},addOnsDependencies:{kroki:["pako"]},yaml:{userInput:!0,searchInContent:!1,detectBadWords:!1,maths:!1,theme:"",dynamicContent:!1,typeWriter:!0,obfuscate:!1,addOns:"",bots:"",variables:""}};e.yaml.useLLM={ok:!1,url:"",askAPIkey:!1,apiKey:"",model:"",always:!1,systemPrompt:"Tu es un assistant efficace qui réponds en français et pas dans une autre langue. Les phrases de réponse doivent être courtes et claires.",maxTokens:100,preprompt:"",postprompt:"\nN'oublie pas de répondre en français."};function t(e){return e[Math.floor(Math.random()*e.length)]}function n(e,t){for(const n of t)if(e.startsWith(n))return n}function r(e){return e.sort((function(){return Math.random()-.5}))}function i(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.src=e,r.onload=t,r.onerror=n,document.head.appendChild(r)}))}function o(e){return new Promise(((t,n)=>{let r;e.startsWith("<style>")?(r=document.createElement("style"),r.textContent=e.replace("<style>","").replace("</style>","")):(r=document.createElement("link"),r.href=e,r.rel="stylesheet",r.onload=t,r.onerror=n),document.head.appendChild(r)}))}function s(){setTimeout((()=>{window.scrollTo(0,document.body.scrollHeight)}),100)}e.yaml.useLLM.RAG={informations:"",separator:"\n",maxTopElements:3,prompt:"\nVoici ci-dessous le contexte à partir duquel tu dois partir pour construire ta réponse, tu dois sélectionner dans ce contexte l'information pertinente et ne pas parler du reste. Si l'information n'est pas dans le contexte, indique-le et essaie de répondre malgré tout.\nCONTEXTE : "};const a=document.getElementById("footer");function l(e){const t=parseFloat(e);return isNaN(t)||t.toString()!==e.toString().trim()?e:t}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function c(e){return null==e}var u={isNothing:c,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:c(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function p(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function d(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=p(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=function(e){return this.name+": "+p(this,e)};var f=d;function h(e,t,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-t>a&&(t=r-a+(o=" ... ").length),n-r>a&&(n=r+a-(s=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"→")+s,pos:r-t+o.length}}function m(e,t){return u.repeat(" ",t-e.length)+e}var g=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],s=-1;n=r.exec(e.buffer);)o.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var a,l,c="",p=Math.min(e.line+t.linesAfter,o.length).toString().length,d=t.maxLength-(t.indent+p+3);for(a=1;a<=t.linesBefore&&!(s-a<0);a++)l=h(e.buffer,i[s-a],o[s-a],e.position-(i[s]-i[s-a]),d),c=u.repeat(" ",t.indent)+m((e.line-a+1).toString(),p)+" | "+l.str+"\n"+c;for(l=h(e.buffer,i[s],o[s],e.position,d),c+=u.repeat(" ",t.indent)+m((e.line+1).toString(),p)+" | "+l.str+"\n",c+=u.repeat("-",t.indent+p+3+l.pos)+"^\n",a=1;a<=t.linesAfter&&!(s+a>=o.length);a++)l=h(e.buffer,i[s+a],o[s+a],e.position-(i[s]-i[s+a]),d),c+=u.repeat(" ",t.indent)+m((e.line+a+1).toString(),p)+" | "+l.str+"\n";return c.replace(/\n$/,"")},y=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],b=["scalar","sequence","mapping"];var v=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===y.indexOf(t))throw new f('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===b.indexOf(this.kind))throw new f('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function A(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function w(e){return this.extend(e)}w.prototype.extend=function(e){var t=[],n=[];if(e instanceof v)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new f("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof v))throw new f("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new f("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new f("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof v))throw new f("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(w.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=A(r,"implicit"),r.compiledExplicit=A(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var C=w,k=new v("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),L=new v("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),x=new v("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),I=new C({explicit:[k,L,x]});var M=new v("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var O=new v("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function E(e){return 48<=e&&e<=55}function T(e){return 48<=e&&e<=57}var S=new v("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,i=0,o=!1;if(!r)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===r)return!0;if("b"===(t=e[++i])){for(i++;i<r;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!E(e.charCodeAt(i)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;i<r;i++)if("_"!==(t=e[i])){if(!T(e.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!u.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),j=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var N=/^[-+]?[0-9]+e/;var F=new v("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!j.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||u.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(u.isNegativeZero(e))return"-0.0";return n=e.toString(10),N.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),P=I.extend({implicit:[M,O,S,F]}),B=P,q=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),D=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var R=new v("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==q.exec(e)||null!==D.exec(e))},construct:function(e){var t,n,r,i,o,s,a,l,c=0,u=null;if(null===(t=q.exec(e))&&(t=D.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),l=new Date(Date.UTC(n,r,i,o,s,a,c)),u&&l.setTime(l.getTime()-u),l},instanceOf:Date,represent:function(e){return e.toISOString()}});var W=new v("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var _=new v("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=$;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=$,s=0,a=[];for(t=0;t<i;t++)t%4==0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(255&s)),s=s<<6|o.indexOf(r.charAt(t));return 0===(n=i%4*6)?(a.push(s>>16&255),a.push(s>>8&255),a.push(255&s)):18===n?(a.push(s>>10&255),a.push(s>>2&255)):12===n&&a.push(s>>4&255),new Uint8Array(a)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,s=$;for(t=0;t<o;t++)t%3==0&&t&&(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]),i=(i<<8)+e[t];return 0===(n=o%3)?(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]):2===n?(r+=s[i>>10&63],r+=s[i>>4&63],r+=s[i<<2&63],r+=s[64]):1===n&&(r+=s[i>>2&63],r+=s[i<<4&63],r+=s[64],r+=s[64]),r}}),K=Object.prototype.hasOwnProperty,U=Object.prototype.toString;var Y=new v("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,s=[],a=e;for(t=0,n=a.length;t<n;t+=1){if(r=a[t],o=!1,"[object Object]"!==U.call(r))return!1;for(i in r)if(K.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==s.indexOf(i))return!1;s.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),z=Object.prototype.toString;var H=new v("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],"[object Object]"!==z.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),G=Object.prototype.hasOwnProperty;var J=new v("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(G.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),V=B.extend({implicit:[R,W],explicit:[_,Y,H,J]}),Q=Object.prototype.hasOwnProperty,Z=1,X=2,ee=3,te=4,ne=1,re=2,ie=3,oe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,se=/[\x85\u2028\u2029]/,ae=/[,\[\]\{\}]/,le=/^(?:!|!!|![a-z\-]+!)$/i,ce=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ue(e){return Object.prototype.toString.call(e)}function pe(e){return 10===e||13===e}function de(e){return 9===e||32===e}function fe(e){return 9===e||32===e||10===e||13===e}function he(e){return 44===e||91===e||93===e||123===e||125===e}function me(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function ge(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function ye(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var be=new Array(256),ve=new Array(256),Ae=0;Ae<256;Ae++)be[Ae]=ge(Ae)?1:0,ve[Ae]=ge(Ae);function we(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||V,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ce(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=g(n),new f(t,n)}function ke(e,t){throw Ce(e,t)}function Le(e,t){e.onWarning&&e.onWarning.call(null,Ce(e,t))}var xe={YAML:function(e,t,n){var r,i,o;null!==e.version&&ke(e,"duplication of %YAML directive"),1!==n.length&&ke(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&ke(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&ke(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&Le(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&ke(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],le.test(r)||ke(e,"ill-formed tag handle (first argument) of the TAG directive"),Q.call(e.tagMap,r)&&ke(e,'there is a previously declared suffix for "'+r+'" tag handle'),ce.test(i)||ke(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(t){ke(e,"tag prefix is malformed: "+i)}e.tagMap[r]=i}};function Ie(e,t,n,r){var i,o,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;i<o;i+=1)9===(s=a.charCodeAt(i))||32<=s&&s<=1114111||ke(e,"expected valid JSON character");else oe.test(a)&&ke(e,"the stream contains non-printable characters");e.result+=a}}function Me(e,t,n,r){var i,o,s,a;for(u.isObject(n)||ke(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,a=(i=Object.keys(n)).length;s<a;s+=1)o=i[s],Q.call(t,o)||(t[o]=n[o],r[o]=!0)}function Oe(e,t,n,r,i,o,s,a,l){var c,u;if(Array.isArray(i))for(c=0,u=(i=Array.prototype.slice.call(i)).length;c<u;c+=1)Array.isArray(i[c])&&ke(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===ue(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===ue(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)Me(e,t,o[c],n);else Me(e,t,o,n);else e.json||Q.call(n,i)||!Q.call(t,i)||(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,ke(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function Ee(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):ke(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Te(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;de(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!pe(i))break;for(Ee(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&Le(e,"deficient indentation"),r}function Se(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!fe(t)))}function je(e,t){1===t?e.result+=" ":t>1&&(e.result+=u.repeat("\n",t-1))}function Ne(e,t){var n,r,i=e.tag,o=e.anchor,s=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,ke(e,"tab characters must not be used in indentation")),45===r)&&fe(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,Te(e,!0,-1)&&e.lineIndent<=t)s.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,Be(e,t,ee,!1,!0),s.push(e.result),Te(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)ke(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=s,!0)}function Fe(e){var t,n,r,i,o=!1,s=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&ke(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(s=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):ke(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!fe(i);)33===i&&(s?ke(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),le.test(n)||ke(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),ae.test(r)&&ke(e,"tag suffix cannot contain flow indicator characters")}r&&!ce.test(r)&&ke(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(t){ke(e,"tag name is malformed: "+r)}return o?e.tag=r:Q.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:ke(e,'undeclared tag handle "'+n+'"'),!0}function Pe(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&ke(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!fe(n)&&!he(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ke(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Be(e,t,n,r,i){var o,s,a,l,c,p,d,f,h,m=1,g=!1,y=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=te===n||ee===n,r&&Te(e,!0,-1)&&(g=!0,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)),1===m)for(;Fe(e)||Pe(e);)Te(e,!0,-1)?(g=!0,a=o,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)):a=!1;if(a&&(a=g||i),1!==m&&te!==n||(f=Z===n||X===n?t:t+1,h=e.position-e.lineStart,1===m?a&&(Ne(e,h)||function(e,t,n){var r,i,o,s,a,l,c,u=e.tag,p=e.anchor,d={},f=Object.create(null),h=null,m=null,g=null,y=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),c=e.input.charCodeAt(e.position);0!==c;){if(y||-1===e.firstTabInLine||(e.position=e.firstTabInLine,ke(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,63!==c&&58!==c||!fe(r)){if(s=e.line,a=e.lineStart,l=e.position,!Be(e,n,X,!1,!0))break;if(e.line===o){for(c=e.input.charCodeAt(e.position);de(c);)c=e.input.charCodeAt(++e.position);if(58===c)fe(c=e.input.charCodeAt(++e.position))||ke(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(Oe(e,d,f,h,m,null,s,a,l),h=m=g=null),b=!0,y=!1,i=!1,h=e.tag,m=e.result;else{if(!b)return e.tag=u,e.anchor=p,!0;ke(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=p,!0;ke(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(y&&(Oe(e,d,f,h,m,null,s,a,l),h=m=g=null),b=!0,y=!0,i=!0):y?(y=!1,i=!0):ke(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===o||e.lineIndent>t)&&(y&&(s=e.line,a=e.lineStart,l=e.position),Be(e,t,te,!0,i)&&(y?m=e.result:g=e.result),y||(Oe(e,d,f,h,m,g,s,a,l),h=m=g=null),Te(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==c)ke(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&Oe(e,d,f,h,m,null,s,a,l),b&&(e.tag=u,e.anchor=p,e.kind="mapping",e.result=d),b}(e,h,f))||function(e,t){var n,r,i,o,s,a,l,c,u,p,d,f,h=!0,m=e.tag,g=e.anchor,y=Object.create(null);if(91===(f=e.input.charCodeAt(e.position)))s=93,c=!1,o=[];else{if(123!==f)return!1;s=125,c=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(++e.position);0!==f;){if(Te(e,!0,t),(f=e.input.charCodeAt(e.position))===s)return e.position++,e.tag=m,e.anchor=g,e.kind=c?"mapping":"sequence",e.result=o,!0;h?44===f&&ke(e,"expected the node content, but found ','"):ke(e,"missed comma between flow collection entries"),d=null,a=l=!1,63===f&&fe(e.input.charCodeAt(e.position+1))&&(a=l=!0,e.position++,Te(e,!0,t)),n=e.line,r=e.lineStart,i=e.position,Be(e,t,Z,!1,!0),p=e.tag,u=e.result,Te(e,!0,t),f=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==f||(a=!0,f=e.input.charCodeAt(++e.position),Te(e,!0,t),Be(e,t,Z,!1,!0),d=e.result),c?Oe(e,o,y,p,u,d,n,r,i):a?o.push(Oe(e,null,y,p,u,d,n,r,i)):o.push(u),Te(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(h=!0,f=e.input.charCodeAt(++e.position)):h=!1}ke(e,"unexpected end of the stream within a flow collection")}(e,f)?y=!0:(s&&function(e,t){var n,r,i,o,s,a=ne,l=!1,c=!1,p=t,d=0,f=!1;if(124===(o=e.input.charCodeAt(e.position)))r=!1;else{if(62!==o)return!1;r=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)ne===a?a=43===o?ie:re:ke(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(s=o)&&s<=57?s-48:-1)>=0))break;0===i?ke(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?ke(e,"repeat of an indentation width identifier"):(p=t+i-1,c=!0)}if(de(o)){do{o=e.input.charCodeAt(++e.position)}while(de(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!pe(o)&&0!==o)}for(;0!==o;){for(Ee(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!c||e.lineIndent<p)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>p&&(p=e.lineIndent),pe(o))d++;else{if(e.lineIndent<p){a===ie?e.result+=u.repeat("\n",l?1+d:d):a===ne&&l&&(e.result+="\n");break}for(r?de(o)?(f=!0,e.result+=u.repeat("\n",l?1+d:d)):f?(f=!1,e.result+=u.repeat("\n",d+1)):0===d?l&&(e.result+=" "):e.result+=u.repeat("\n",d):e.result+=u.repeat("\n",l?1+d:d),l=!0,c=!0,d=0,n=e.position;!pe(o)&&0!==o;)o=e.input.charCodeAt(++e.position);Ie(e,n,e.position,!1)}}return!0}(e,f)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(Ie(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else pe(n)?(Ie(e,r,i,!0),je(e,Te(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Se(e)?ke(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);ke(e,"unexpected end of the stream within a single quoted scalar")}(e,f)||function(e,t){var n,r,i,o,s,a,l;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return Ie(e,n,e.position,!0),e.position++,!0;if(92===a){if(Ie(e,n,e.position,!0),pe(a=e.input.charCodeAt(++e.position)))Te(e,!1,t);else if(a<256&&be[a])e.result+=ve[a],e.position++;else if((s=120===(l=a)?2:117===l?4:85===l?8:0)>0){for(i=s,o=0;i>0;i--)(s=me(a=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+s:ke(e,"expected hexadecimal character");e.result+=ye(o),e.position++}else ke(e,"unknown escape sequence");n=r=e.position}else pe(a)?(Ie(e,n,r,!0),je(e,Te(e,!1,t)),n=r=e.position):e.position===e.lineStart&&Se(e)?ke(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}ke(e,"unexpected end of the stream within a double quoted scalar")}(e,f)?y=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!fe(r)&&!he(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ke(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Q.call(e.anchorMap,n)||ke(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Te(e,!0,-1),!0}(e)?function(e,t,n){var r,i,o,s,a,l,c,u,p=e.kind,d=e.result;if(fe(u=e.input.charCodeAt(e.position))||he(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(fe(r=e.input.charCodeAt(e.position+1))||n&&he(r)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,s=!1;0!==u;){if(58===u){if(fe(r=e.input.charCodeAt(e.position+1))||n&&he(r))break}else if(35===u){if(fe(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&Se(e)||n&&he(u))break;if(pe(u)){if(a=e.line,l=e.lineStart,c=e.lineIndent,Te(e,!1,-1),e.lineIndent>=t){s=!0,u=e.input.charCodeAt(e.position);continue}e.position=o,e.line=a,e.lineStart=l,e.lineIndent=c;break}}s&&(Ie(e,i,o,!1),je(e,e.line-a),i=o=e.position,s=!1),de(u)||(o=e.position+1),u=e.input.charCodeAt(++e.position)}return Ie(e,i,o,!1),!!e.result||(e.kind=p,e.result=d,!1)}(e,f,Z===n)&&(y=!0,null===e.tag&&(e.tag="?")):(y=!0,null===e.tag&&null===e.anchor||ke(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===m&&(y=a&&Ne(e,h))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&ke(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,c=e.implicitTypes.length;l<c;l+=1)if((d=e.implicitTypes[l]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Q.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,l=0,c=(p=e.typeMap.multi[e.kind||"fallback"]).length;l<c;l+=1)if(e.tag.slice(0,p[l].tag.length)===p[l].tag){d=p[l];break}d||ke(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&ke(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):ke(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||y}function qe(e){var t,n,r,i,o=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(Te(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(s=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!fe(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&ke(e,"directive name must not be less than one character in length");0!==i;){for(;de(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!pe(i));break}if(pe(i))break;for(t=e.position;0!==i&&!fe(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&Ee(e),Q.call(xe,n)?xe[n](e,n,r):Le(e,'unknown document directive "'+n+'"')}Te(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,Te(e,!0,-1)):s&&ke(e,"directives end mark is expected"),Be(e,e.lineIndent-1,te,!1,!0),Te(e,!0,-1),e.checkLineBreaks&&se.test(e.input.slice(o,e.position))&&Le(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Se(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,Te(e,!0,-1)):e.position<e.length-1&&ke(e,"end of the stream or a document separator is expected")}function De(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new we(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,ke(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)qe(n);return n.documents}var Re={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=De(e,n);if("function"!=typeof t)return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])},load:function(e,t){var n=De(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new f("expected a single document in the stream, but found more")}}},We=Object.prototype.toString,$e=Object.prototype.hasOwnProperty,_e=65279,Ke=9,Ue=10,Ye=13,ze=32,He=33,Ge=34,Je=35,Ve=37,Qe=38,Ze=39,Xe=42,et=44,tt=45,nt=58,rt=61,it=62,ot=63,st=64,at=91,lt=93,ct=96,ut=123,pt=124,dt=125,ft={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},ht=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],mt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function gt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new f("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+u.repeat("0",r-t.length)+t}var yt=1,bt=2;function vt(e){this.schema=e.schema||V,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=u.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,o,s,a,l;if(null===t)return{};for(n={},i=0,o=(r=Object.keys(t)).length;i<o;i+=1)s=r[i],a=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(l=e.compiledTypeMap.fallback[s])&&$e.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?bt:yt,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function At(e,t){for(var n,r=u.repeat(" ",t),i=0,o=-1,s="",a=e.length;i<a;)-1===(o=e.indexOf("\n",i))?(n=e.slice(i),i=a):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(s+=r),s+=n;return s}function wt(e,t){return"\n"+u.repeat(" ",e.indent*t)}function Ct(e){return e===ze||e===Ke}function kt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==_e||65536<=e&&e<=1114111}function Lt(e){return kt(e)&&e!==_e&&e!==Ye&&e!==Ue}function xt(e,t,n){var r=Lt(e),i=r&&!Ct(e);return(n?r:r&&e!==et&&e!==at&&e!==lt&&e!==ut&&e!==dt)&&e!==Je&&!(t===nt&&!i)||Lt(t)&&!Ct(t)&&e===Je||t===nt&&i}function It(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function Mt(e){return/^\n* /.test(e)}var Ot=1,Et=2,Tt=3,St=4,jt=5;function Nt(e,t,n,r,i,o,s,a){var l,c,u=0,p=null,d=!1,f=!1,h=-1!==r,m=-1,g=kt(c=It(e,0))&&c!==_e&&!Ct(c)&&c!==tt&&c!==ot&&c!==nt&&c!==et&&c!==at&&c!==lt&&c!==ut&&c!==dt&&c!==Je&&c!==Qe&&c!==Xe&&c!==He&&c!==pt&&c!==rt&&c!==it&&c!==Ze&&c!==Ge&&c!==Ve&&c!==st&&c!==ct&&function(e){return!Ct(e)&&e!==nt}(It(e,e.length-1));if(t||s)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!kt(u=It(e,l)))return jt;g=g&&xt(u,p,a),p=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if((u=It(e,l))===Ue)d=!0,h&&(f=f||l-m-1>r&&" "!==e[m+1],m=l);else if(!kt(u))return jt;g=g&&xt(u,p,a),p=u}f=f||h&&l-m-1>r&&" "!==e[m+1]}return d||f?n>9&&Mt(e)?jt:s?o===bt?jt:Et:f?St:Tt:!g||s||i(e)?o===bt?jt:Et:Ot}function Ft(e,t,n,r,i){e.dump=function(){if(0===t.length)return e.quotingType===bt?'""':"''";if(!e.noCompatMode&&(-1!==ht.indexOf(t)||mt.test(t)))return e.quotingType===bt?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;switch(Nt(t,a,e.indent,s,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,i)){case Ot:return t;case Et:return"'"+t.replace(/'/g,"''")+"'";case Tt:return"|"+Pt(t,e.indent)+Bt(At(t,o));case St:return">"+Pt(t,e.indent)+Bt(At(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,o=(a=e.indexOf("\n"),a=-1!==a?a:e.length,i.lastIndex=a,qt(e.slice(0,a),t)),s="\n"===e[0]||" "===e[0];var a;for(;r=i.exec(e);){var l=r[1],c=r[2];n=" "===c[0],o+=l+(s||n||""===c?"":"\n")+qt(c,t),s=n}return o}(t,s),o));case jt:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=It(e,i),!(t=ft[r])&&kt(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||gt(r);return n}(t)+'"';default:throw new f("impossible error: invalid scalar style")}}()}function Pt(e,t){var n=Mt(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function Bt(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function qt(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,s=0,a=0,l="";n=i.exec(e);)(a=n.index)-o>t&&(r=s>o?s:a,l+="\n"+e.slice(o,r),o=r+1),s=a;return l+="\n",e.length-o>t&&s>o?l+=e.slice(o,s)+"\n"+e.slice(s+1):l+=e.slice(o),l.slice(1)}function Dt(e,t,n,r){var i,o,s,a="",l=e.tag;for(i=0,o=n.length;i<o;i+=1)s=n[i],e.replacer&&(s=e.replacer.call(n,String(i),s)),(Wt(e,t+1,s,!0,!0,!1,!0)||void 0===s&&Wt(e,t+1,null,!0,!0,!1,!0))&&(r&&""===a||(a+=wt(e,t)),e.dump&&Ue===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function Rt(e,t,n){var r,i,o,s,a,l;for(o=0,s=(i=n?e.explicitTypes:e.implicitTypes).length;o<s;o+=1)if(((a=i[o]).instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===We.call(a.represent))r=a.represent(t,l);else{if(!$e.call(a.represent,l))throw new f("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');r=a.represent[l](t,l)}e.dump=r}return!0}return!1}function Wt(e,t,n,r,i,o,s){e.tag=null,e.dump=n,Rt(e,n,!1)||Rt(e,n,!0);var a,l=We.call(e.dump),c=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var u,p,d="[object Object]"===l||"[object Array]"===l;if(d&&(p=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||p||2!==e.indent&&t>0)&&(i=!1),p&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(d&&p&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===l)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,o,s,a,l,c,u="",p=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new f("sortKeys must be a boolean or a function");for(i=0,o=d.length;i<o;i+=1)c="",r&&""===u||(c+=wt(e,t)),a=n[s=d[i]],e.replacer&&(a=e.replacer.call(n,s,a)),Wt(e,t+1,s,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&Ue===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,l&&(c+=wt(e,t)),Wt(e,t+1,a,!0,l)&&(e.dump&&Ue===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=p,e.dump=u||"{}"}(e,t,e.dump,i),p&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,s,a,l="",c=e.tag,u=Object.keys(n);for(r=0,i=u.length;r<i;r+=1)a="",""!==l&&(a+=", "),e.condenseFlow&&(a+='"'),s=n[o=u[r]],e.replacer&&(s=e.replacer.call(n,o,s)),Wt(e,t,o,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Wt(e,t,s,!1,!1)&&(l+=a+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===l)r&&0!==e.dump.length?(e.noArrayIndent&&!s&&t>0?Dt(e,t-1,e.dump,i):Dt(e,t,e.dump,i),p&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,s="",a=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(Wt(e,t,o,!1,!1)||void 0===o&&Wt(e,t,null,!1,!1))&&(""!==s&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=a,e.dump="["+s+"]"}(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new f("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&Ft(e,e.dump,t,o,c)}null!==e.tag&&"?"!==e.tag&&(a=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),a="!"===e.tag[0]?"!"+a:"tag:yaml.org,2002:"===a.slice(0,18)?"!!"+a.slice(18):"!<"+a+">",e.dump=a+" "+e.dump)}return!0}function $t(e,t){var n,r,i=[],o=[];for(_t(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function _t(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)_t(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)_t(e[r[i]],t,n)}function Kt(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Ut={Type:v,Schema:C,FAILSAFE_SCHEMA:I,JSON_SCHEMA:P,CORE_SCHEMA:B,DEFAULT_SCHEMA:V,load:Re.load,loadAll:Re.loadAll,dump:{dump:function(e,t){var n=new vt(t=t||{});n.noRefs||$t(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Wt(n,0,r,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:f,types:{binary:_,float:F,map:x,null:M,pairs:H,set:J,timestamp:R,bool:O,int:S,merge:W,omap:Y,seq:L,str:k},safeLoad:Kt("safeLoad","load"),safeLoadAll:Kt("safeLoadAll","loadAll"),safeDump:Kt("safeDump","dump")};let Yt,zt={maths:e.yaml.maths,addOns:e.yaml.addOns,style:e.yaml.style,userInput:e.yaml.userInput,responsesTitles:e.responsesTitles,searchInContent:e.yaml.searchInContent,detectBadWords:e.yaml.detectBadWords,avatar:e.yaml.avatar,footer:e.yaml.footer,theme:e.yaml.theme,dynamicContent:e.yaml.dynamicContent,typeWriter:e.yaml.typeWriter,obfuscate:e.yaml.obfuscate,bots:e.yaml.bots,useLLM:e.yaml.useLLM,variables:e.yaml.variables};function Ht(){return Ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ht.apply(this,arguments)}var Gt={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(e){},onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}},Jt=new(function(){function e(){}var t=e.prototype;return t.load=function(e,t,n){if(e.el="string"==typeof n?document.querySelector(n):n,e.options=Ht({},Gt,t),e.isInput="input"===e.el.tagName.toLowerCase(),e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map((function(e){return e.trim()})),e.stringsElement="string"==typeof e.options.stringsElement?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(e.stringsElement.children),i=r.length;if(i)for(var o=0;o<i;o+=1)e.strings.push(r[o].innerHTML.trim())}for(var s in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[s]=s;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:"html"===e.contentType?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var t="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+t+"]")){var n=document.createElement("style");n.setAttribute(t,"true"),n.innerHTML="\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      ",document.body.appendChild(n)}},t.appendFadeOutAnimationCss=function(e){var t="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+t+"]")){var n=document.createElement("style");n.setAttribute(t,"true"),n.innerHTML="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      ",document.body.appendChild(n)}},e}()),Vt=new(function(){function e(){}var t=e.prototype;return t.typeHtmlChars=function(e,t,n){if("html"!==n.contentType)return t;var r=e.substring(t).charAt(0);if("<"===r||"&"===r){var i;for(i="<"===r?">":";";e.substring(t+1).charAt(0)!==i&&!(1+ ++t>e.length););t++}return t},t.backSpaceHtmlChars=function(e,t,n){if("html"!==n.contentType)return t;var r=e.substring(t).charAt(0);if(">"===r||";"===r){var i;for(i=">"===r?"<":"&";e.substring(t-1).charAt(0)!==i&&!(--t<0););t--}return t},e}()),Qt=function(){function e(e,t){Jt.load(this,t,e),this.begin()}var t=e.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){void 0===e&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout((function(){0===e.strPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)}),this.startDelay)},t.typewrite=function(e,t){var n=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),i=1;!0!==this.pause.status?this.timeout=setTimeout((function(){t=Vt.typeHtmlChars(e,t,n);var r=0,o=e.substring(t);if("^"===o.charAt(0)&&/^\^\d+/.test(o)){var s=1;s+=(o=/\d+/.exec(o)[0]).length,r=parseInt(o),n.temporaryPause=!0,n.options.onTypingPaused(n.arrayPos,n),e=e.substring(0,t)+e.substring(t+s),n.toggleBlinking(!0)}if("`"===o.charAt(0)){for(;"`"!==e.substring(t+i).charAt(0)&&(i++,!(t+i>e.length)););var a=e.substring(0,t),l=e.substring(a.length+1,t+i),c=e.substring(t+i+1);e=a+l+c,i--}n.timeout=setTimeout((function(){n.toggleBlinking(!1),t>=e.length?n.doneTyping(e,t):n.keepTyping(e,t,i),n.temporaryPause&&(n.temporaryPause=!1,n.options.onTypingResumed(n.arrayPos,n))}),r)}),r):this.setPauseStatus(e,t,!0)},t.keepTyping=function(e,t,n){0===t&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=e.substring(0,t+=n);this.replaceText(r),this.typewrite(e,t)},t.doneTyping=function(e,t){var n=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),!1===this.loop||this.curLoop===this.loopCount)||(this.timeout=setTimeout((function(){n.backspace(e,t)}),this.backDelay))},t.backspace=function(e,t){var n=this;if(!0!==this.pause.status){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout((function(){t=Vt.backSpaceHtmlChars(e,t,n);var r=e.substring(0,t);if(n.replaceText(r),n.smartBackspace){var i=n.strings[n.arrayPos+1];n.stopNum=i&&r===i.substring(0,t)?t:0}t>n.stopNum?(t--,n.backspace(e,t)):t<=n.stopNum&&(n.arrayPos++,n.arrayPos===n.strings.length?(n.arrayPos=0,n.options.onLastStringBackspaced(),n.shuffleStringsIfNeeded(),n.begin()):n.typewrite(n.strings[n.sequence[n.arrayPos]],t))}),r)}else this.setPauseStatus(e,t,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,t,n){this.pause.typewrite=n,this.pause.curString=e,this.pause.curStrPos=t},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort((function(){return Math.random()-.5})))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout((function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)}),this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:"html"===this.contentType?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",(function(t){e.stop()})),this.el.addEventListener("blur",(function(t){e.el.value&&0!==e.el.value.length||e.start()})))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},e}();const Zt=document.getElementById("chat"),Xt=document.getElementById("user-input"),en=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),tn=!en,nn=10,rn=/(<pre(.|\n)*<\/pre>)/gm,on=/(<ul class="messageOptions"\>[\s\S]*<\/ul>)/gm,sn=/(<iframe(.|\n)*<\/iframe>)/gm;let an;const ln={childList:!0,subtree:!0},cn=en?"Clic sur “Envoyer” pour stopper l'effet “machine à écrire”":window.innerWidth>880?"Appuyez sur “Enter” pour stopper l'effet “machine à écrire” et afficher la réponse immédiatement":"“Enter” pour stopper l'effet “machine à écrire”";let un;const pn="^300 ",dn="^200 ",fn=800;function hn(e,t,n){Zt.appendChild(n),t||window.matchMedia("(prefers-reduced-motion: reduce)").matches||!1===zt.typeWriter?n.innerHTML=e:function(e,t){function n(e){un.stop(),un.reset();const t=(e=(e=e.replaceAll("`","")).replace(on,"`$1`")).replaceAll(rn,(function(e){return e.replaceAll("\n","RETURNCHARACTER")})).split("\n").map((e=>e.startsWith(pn)?e.replace(pn,"").replaceAll("RETURNCHARACTER","\n")+"`":e.endsWith("`")?"`"+e.replaceAll("RETURNCHARACTER","\n"):"`"+e.replaceAll("RETURNCHARACTER","\n").replace(dn,"")+"`"));un.strings=[t.join(" ")],un.start(),un.destroy()}function r(t){"Enter"===t.key&&(an.disconnect(),a=!1,n(e))}let i=0;const o=Date.now();let a=!0;function l(){const t=Date.now()-o;50==i&&t>fn&&a&&(n(e),a=!1,an.disconnect()),s(),i++}e=(e=e.replace(on,pn+"`$1`")).replaceAll(sn,"`$1`"),un=new Qt(t,{strings:[e],typeSpeed:-5e3,startDelay:100,showCursor:!1,onBegin:()=>{function e(){an.observe(Zt,ln)}tn&&Xt.focus(),Xt.addEventListener("keypress",r),Xt.setAttribute("placeholder",cn),an=new MutationObserver(l),e(),setTimeout((()=>{document.addEventListener("mousemove",(function(e){(Math.abs(e.movementX)>nn||Math.abs(e.movementY)>nn)&&(a=!1,an.disconnect())})),document.addEventListener("wheel",(function(t){t.deltaY>0&&window.scrollY+window.innerHeight>=document.body.offsetHeight?e():(a=!1,an.disconnect())})),document.addEventListener("touchstart",(function(){a=!1,an.disconnect(),setTimeout((()=>{window.scrollY+window.innerHeight+200>=document.documentElement.scrollHeight&&e()}),5e3)}))}),1e3)},onComplete:()=>{zt.addOns&&zt.addOns.includes("textFit")&&window.textFit(t.querySelectorAll(".katex-display")),Xt.removeEventListener("keypress",r),Xt.getAttribute("placeholder")==cn&&Xt.setAttribute("placeholder","Écrivez votre message"),a=!1,an.disconnect()}})}(e,n)}let mn={goto:"",lastMessageFromBot:"",selected:"",onlyIfKeywords:!1,errorsCounter:0,maxErrors:3,messageIfKeywordsNotFound:""};function gn(e,n=!1){const r=n?/@{(_\S+)}/g:/@{(\S+)}/g;return e.replaceAll(r,(function(r,i,o){const s=e.lastIndexOf(r);if(zt.variables&&zt.variables[i]){const e=t(zt.variables[i].split("///"));return n&&o==s&&delete zt.variables[i],e}return"@{"+i+"}"}))}let yn=!1;const bn=["+","-","*","/","<=",">=","<",">","==","!=","&&","||","!"];function vn(t,n){t=e.secureMode?t:function(e){let t=e.replace(/tryConvertStringToNumber\(.*?\]\)/g,"");return bn.forEach((e=>{t=t.replaceAll(e,"///")})),t=t.replace(/[0-9]*/g,""),t=t.replace(/".*?"/g,"///"),t.split("///").forEach((t=>{e=e.replaceAll(t,"")})),e}(t);return new Function("dynamicVariables","tryConvertStringToNumber","return "+t)(n,l)}function An(e,t){return vn(e.replace(/@(\w+)/g,(function(e,t){return'tryConvertStringToNumber(dynamicVariables["'+t.trim()+'"])'})),t)}function wn(e,t,n){if(n)e=e.replaceAll(/@([^\s]*?)\=(.*)/g,(function(e,n,r,i){if(e.includes("calc("))try{const e=An(r.replace("calc(","").trim().slice(0,-1),t);t[n]=e}catch(t){return console.error("Error evaluating :",e,t),"\x3c!--"+e+"--\x3e"}else t[n]=r;return 0==i?r:""})),yn?yn&&yn.length>0?(t[yn[0]]=e,mn.goto=yn[1],yn=!1):mn.goto="":mn.goto=mn.onlyIfKeywords?mn.goto:"";else{e=(e=e.replaceAll(/\`@([^\s]*?) ?= ?(?<!@)(.*?)\`/g,(function(e,n,r){return e.includes("calc(")||e.includes("@INPUT")?e:(t[n]=r,e.includes("KEYBOARD")?"\x3c!--"+e+"--\x3e":"")}))).replaceAll("\x3c!--\x3c!--","\x3c!--").replaceAll("--\x3e--\x3e","--\x3e"),!1===zt.userInput?"true"==t.KEYBOARD?(document.body.classList.remove("hideControls"),t.KEYBOARD="false"):document.body.classList.add("hideControls"):"false"==t.KEYBOARD?(document.body.classList.add("hideControls"),t.KEYBOARD="true"):document.body.classList.remove("hideControls");const n=!!(e=e.replaceAll(/\`@([^\s]*?)\`/g,(function(e,n){return e.includes("=")?e:t[n]?t[n]:e}))).includes("calc(");e=e.replaceAll(/\`@([^\s]*?) ?= ?calc\((.*)\)\`/g,(function(e,n,r){try{const e=An(r,t);return t[n]=e,""}catch(t){return console.error("Error evaluating :",e,t),"\x3c!--"+e+"--\x3e"}})),(n||e.includes("`@"))&&(e=e.replaceAll(/\`@([^\s]*?)\`/g,(function(e,n){return e.includes("=")?e:t[n]?t[n]:""}))),e=(e=(e=(e=e.replaceAll(/\`@([^\s]*?) ?= ?@INPUT : (.*)\`/g,(function(e,t,n){return yn=!!e&&[t,n],""}))).replaceAll(/ (@[^\s]*?\=.*?)\</g,'<span class="hidden">$1</span><')).replaceAll(/>(@[^\s]*?\=)/g,'><span class="hidden">$1</span>')).replaceAll(/\`if (.*?)\`((\n|.*)*?)\`endif\`/g,(function(e,n,r){if(!n)return"";try{n=(n=n.replace(/@([^\s()&|!=<>]+)/g,(function(e,t){return'tryConvertStringToNumber(dynamicVariables["'+t.trim()+'"])'}))).replaceAll(/(==|!=|<=|>=|<|>) ?(.*?) ?(\)|\&|\||$)/g,(function(e,t,n,r){return`${t}"${n}" ${r}`})).replaceAll('""','"').replace('"undefined"',"undefined");return vn(n,t)?r:""}catch(e){return console.error("Error evaluating condition:",n,e),"\x3c!--"+n+"--\x3e"}})),e=e.replaceAll(/\n\n\n*/g,"\n\n")}return e}const Cn=new window.showdown.Converter({emoji:!0,parseImgDimensions:!0,simpleLineBreaks:!0,simplifiedAutoLink:!0,tables:!0,openLinksInNewWindow:!0,extensions:[function(){return[{type:"output",filter:e=>{const t=(e=e.replaceAll(/<p>:::(.*?)<\/p>/g,":::$1")).match(/:::(.*?)\n(.*?):::/gs);if(t){let n=e;for(const r of t){const t=/:::(.*?)\s(.*?)\n(.*?):::/s.exec(r),i=e.indexOf(r);if(!("<code>"==e.substring(i-6,i))){let e=t[1],i=t[2];e.includes("<br")&&(e=e.replace("<br",""),i="");const o=t[3];let s;i.includes("collapsible")?(i=i.replace("collapsible",""),s=`<div><div class="admonition ${e}"><details><summary class="admonitionTitle">${i}</summary><div class="admonitionContent">${o}</div></details></div></div>`):s=`<div><div class="admonition ${e}"><div class="admonitionTitle">${i}</div><div class="admonitionContent">${o}</div></div></div>`,n=n.replaceAll(r,s)}}return n}return e}}]}]});function kn(e,t){const n=e.length,r=t.length;if(0===n)return r;if(0===r)return n;const i=[];for(let e=0;e<=r;e++)i[e]=[e];for(let e=0;e<=n;e++)i[0][e]=e;for(let o=1;o<=r;o++)for(let r=1;r<=n;r++){const n=e[r-1]===t[o-1]?0:1;i[o][r]=Math.min(i[o-1][r]+1,i[o][r-1]+1,i[o-1][r-1]+n)}return i[r][n]}function Ln(e,t,n){const r=e.split(" ");for(const e of r){if(kn(e,t)<n)return!0}return!1}function xn(e){const t={"à":"a","â":"a","é":"e","è":"e","ê":"e","ë":"e","î":"i","ï":"i","ô":"o","ö":"o","û":"u","ü":"u","ÿ":"y","ç":"c","À":"A","Â":"A","É":"E","È":"E","Ê":"E","Ë":"E","Î":"I","Ï":"I","Ô":"O","Ö":"O","Û":"U","Ü":"U","Ÿ":"Y","Ç":"C"};return e.replace(/[àâéèêëîïôöûüÿçÀÂÉÈÊËÎÏÔÖÛÜŸÇ]/g,(e=>t[e]||e))}function In(e){let t=0;for(const n in e)t+=e[n]**2;return Math.sqrt(t)}function Mn(e,t){const n=function(e,t){let n=e.toLowerCase();n=n.replace(/,|\.|\:|\?|\!|\(|\)|\[|\||\/\]/g,""),n=n.replaceAll("/"," "),n=xn(n),n=n.split(/\s|'/).map((e=>e.trim())).filter((e=>e.length>=5))||[];const r=[],i=[0,0,0,0,.4,.6,.8],o=mn.goto?100:10;function s(e,n,r){let s=i[n-1];s=0===e?s+.2:s;const a=r.substring(e,e+n);return t&&(t=t.toLowerCase()).includes(a)&&(s+=o),{token:a,weight:s}}const a=n.length;for(let e=0;e<a;e++){const t=n[e];r.push({token:t,weight:5});const i=t.length;if(i>=5)for(let e=0;e<=i-5;e++)r.push(s(e,5,t));if(i>=6)for(let e=0;e<=i-6;e++)r.push(s(e,6,t));if(i>=7)for(let e=0;e<=i-7;e++)r.push(s(e,7,t))}return r}(e,t),r={};for(const{token:e,weight:t}of n)e&&(r[e]=(r[e]||0)+t);return r}function On(e,t){const n=Mn(e),r=function(e,t){const n=new Set([...Object.keys(e),...Object.keys(t)]);let r=0;for(const i of n)r+=(e[i]||0)*(t[i]||0);return r}(n,t),i=In(n),o=In(t);return 0===i||0===o?0:r/(i*o)}const En=document.getElementById("send-button");function Tn(n){let i={};const o={...Object.fromEntries(new URLSearchParams(document.location.search)),...Object.fromEntries(new URLSearchParams(document.location.hash.replace(/#.*\?/,"")))};for(const[e,t]of Object.entries(o))i["GET"+e]=t;!1===zt.footer?function(){const e=document.getElementById("controls");a.style.display="none",e.style.height="70px";const t=document.createElement("style");t.innerText="@media screen and (max-width: 500px) { #controls {height:110px!important}}",document.head.appendChild(t)}():!0!==zt.footer&&(a.innerHTML=zt.footer);const l=n.pop();let c=n.pop();const u=n.length;document.getElementById("chatbot-name").textContent=l,document.title=l;let p=null,d=Math.floor(Math.random()*e.defaultMessage.length),f=[];function h(e,n){const r=document.createElement("div");r.classList.add("message"),r.classList.add(n?"user-message":"bot-message"),mn.selected=void 0,e=gn(e),n||(e=function(e){const n=e.split("\n---\n");if(n.length>1){const r=e.indexOf('<ul class="messageOptions">');if(r>-1){const n=e.substring(0,r),i=e.substring(r);e=t(n.split("---"))+i}else e=t(n)}return e}(e)),zt.dynamicContent&&(e=wn(e,i,n)),n||(e=function(e,t){return e.replace(/!Bot:(.*)/,(function(e,n){return e&&n&&(n=n.trim().replaceAll(" ",""),t.classList.add("botName-"+n)),""}))}(e,r),e=function(e){return zt.addOns&&zt.addOns.includes("kroki")&&(e=e.replaceAll(/```(mermaid|tikz|graphviz|plantuml|excalidraw|vegalite|vega)((.|\n)*?)```/gm,(function(e,t,n){return n=n.replaceAll("\n\n\n","\n\n"),window.krokiCreateImageFromSource(t,n)}))),e}(e=function(e){return e.replaceAll(/!SelectNext:(.*)/g,(function(e,n){if(e){const e=n.split("/");return mn.lastMessageFromBot="",mn.goto="",mn.onlyIfKeywords=!1,mn.selected=t(e).trim(),""}mn.selected=""}))}(e=function(e){return e=e.replaceAll(/!Next ?:(.*)/g,(function(t,n){const r=n.split("/");let i;return r.length>0?(n=r[0],i=r[1]):n=r[0],mn.lastMessageFromBot=e,mn.goto=n.trim(),mn.onlyIfKeywords=!0,mn.messageIfKeywordsNotFound=i?i.trim():"Ce n'était pas la bonne réponse, merci de réessayer !",mn.messageIfKeywordsNotFound=mn.messageIfKeywordsNotFound+"\n\n",mn.errorsCounter++,t&&mn.errorsCounter<mn.maxErrors?"":`<ul class="messageOptions"><li><a href="#${zt.obfuscate?btoa(mn.goto):mn.goto}">Passer à la suite !</a></li></ul>`}))}(e=function(e){return(e=e.replaceAll(/<audio[\s\S]*?src="([^"]+)"[\s\S]*?<\/audio>/gm,(function(e,t){return e.includes("autoplay")?(new Audio(t).play(),`\x3c!--${e}--\x3e`):e}))).replaceAll(/!Audio:(.*)/g,(function(e,t){return new Audio(t.trim()).play(),""}))}(e)))));let o=(s=(s=e).replaceAll("\n\n|","|"),Cn.makeHtml(s).replaceAll("&amp;#96","`&#96`"));var s;o=function(e){const t=e.split("<p>!Bot:"),n=t.length;if(n>1){let r=t[0];for(let e=1;e<n;e++){const n=t[e].trim().match(/(.*?)<\/p>((.|\n)*)/),i=n[1].trim(),o=n[2].trim();r=r+dn+'<div class="message bot-message botName-'+i+'">'+o+"</div>"}e=r}return e}(o),!0===zt.maths?(o=function(e){let t=(e=e.replace(/\$\$(.*?)\$\$/g,"&#92;[$1&#92;]").replace(/\$(.*?)\$/g,"&#92;($1&#92;)")).match(new RegExp(/&#92;\[.*?&#92;\]|&#92;\(.*?&#92;\)/g));if(t)for(let n of t){const t=!!n.includes("&#92;[");let r=n.replace("&#92;[","").replace("&#92;]","");r=r.replace("&#92;(","").replace("&#92;)",""),r=r.replaceAll("&lt;","\\lt").replaceAll("&gt;","\\gt"),r=r.replaceAll("<em>","_").replaceAll("</em>","_").replaceAll("&amp;","&").replaceAll(" ","\\ ");const i=window.katex.renderToString(r,{displayMode:t});e=e.replace(n,i)}return!0===zt.typeWriter&&(e=(e=e.replaceAll(/(<span class="katex-mathml">(.|\n)*?<\/span>)/gm,"`$1`")).replaceAll(/(<span class=".?strut">.*?<\/span>)/g,"`$1`")),e}(o),setTimeout((()=>{hn(o,n,r)}),100)):hn(o,n,r),mn.selected&&C(mn.selected)}const m=3,g=5,y=.55;function b(e){if(""!=e)for(let t=0;t<u;t++){let r=n[t][0];if(r=zt.obfuscate?btoa(r):r,e==r){let e=n[t][2];const r=n[t][3];e=Array.isArray(e)?e.join("\n\n"):e,p=r,e=r?k(e,r):e,h(e,!1);break}}else h(c,!1)}let v=[];if(zt.searchInContent||zt.useLLM.ok)for(let e=0;e<u;e++){const t=n[e][2];let r=Array.isArray(t)?t.join(" ").toLowerCase():t.toLowerCase();const i=n[e][0];r=i+" "+r;const o=Mn(r,i);v.push(o)}let A=[];function w(e){if(e){const t=e.length;for(let n=0;n<t;n++){const t=Mn(e[n]);A.push(t)}}}function C(r){""==mn.goto||mn.onlyIfKeywords||(r=mn.goto);let i,o="";if(zt.useLLM.ok&&(r=r.replace('<span class="hidden">!useLLM</span>',"!useLLM"),i=r.trim().replace("!useLLM",""),zt.useLLM.RAG.informations)){const e=function(e,t){let n;return n=e.length<t?e.map(((e,t)=>[e,t])):e.reduce(((e,n,r)=>(e.length<t?(e.push([n,r]),e.sort(((e,t)=>e[0]-t[0]))):n>e[0][0]&&(e[0]=[n,r],e.sort(((e,t)=>e[0]-t[0]))),e)),[]),n.sort(((e,t)=>t[0]-e[0])),n}(A.map((e=>On(i,e))),zt.useLLM.RAG.maxTopElements);o=e.map((e=>zt.useLLM.RAG.informations[e[1]])).join("\n")}if(!0===zt.detectBadWords&&Yt&&Yt.check(r))return void h(t(e.badWordsMessage),!1);let s,a,l,c=null,w=0,C=0,L=r.toLowerCase();if(p&&(a=p.map((e=>e[0].toLowerCase())),l=a.indexOf(L)),p&&l>-1){b(p[l][1])}else{for(let e=0;e<u;e++){const t=n[e][0],r=n[e][1];if(mn.onlyIfKeywords&&t!=mn.goto)continue;mn.onlyIfKeywords&&t==mn.goto&&0==r.length&&(L=mn.goto.toLowerCase());const i=r.concat(t),o=n[e][2];let a=0,l=0;if(zt.searchInContent){a=a+On(L,v[e])+.5}for(let e of i){let t=e.toLowerCase();if(L.includes(t)){let e=!1;if(mn.onlyIfKeywords){L=xn(L),t=xn(t);new RegExp(`\\b${t}\\b`).test(L)&&(e=!0)}else e=!0;e&&(a+=g,a+=t.length/10)}else L.length>4&&Ln(L,e,m)&&l++}0!=a||mn.onlyIfKeywords||l>C&&(a++,C=l),a>0&&mn.onlyIfKeywords&&t==mn.goto&&(a+=g),a>w&&(c=o,w=a,s=e)}if(c&&w>y||mn.onlyIfKeywords){c&&mn.onlyIfKeywords&&(mn.lastMessageFromBot="",mn.goto="",mn.errorsCounter=0,mn.onlyIfKeywords=!1);let e=c?Array.isArray(c)?c.join("\n\n"):c:"";const t=c?n[s][0]:"";let a,l=c?n[s][3]:[];if(a=mn.onlyIfKeywords&&t!==mn.goto?mn.lastMessageFromBot.includes(mn.messageIfKeywordsNotFound)?mn.lastMessageFromBot:mn.messageIfKeywordsNotFound+mn.lastMessageFromBot:k(e,l),zt.useLLM.ok&&zt.useLLM.url&&zt.useLLM.model&&zt.useLLM.always||r.includes("!useLLM"))return void window.getAnswerFromLLM(i.trim(),e+"\n"+o);h(a,!1)}else{if(zt.useLLM.ok&&zt.useLLM.url&&zt.useLLM.model&&zt.useLLM.always||r.includes("!useLLM"))return void window.getAnswerFromLLM(i,o);{for(;f.includes(d);)d=Math.floor(Math.random()*e.defaultMessage.length);f.length>4&&f.shift(),f.push(d);let t=e.defaultMessage[d];if(zt.useLLM.ok&&!zt.useLLM.always&&zt.useLLM.url&&zt.useLLM.model){t=k(t,[["Voir une réponse générée par une IA","!useLLM "+r]])}h(t,!1)}}}}function k(e,t){if(zt.dynamicContent&&Object.keys(i).length>0&&t&&(t=t.filter((e=>{let t=e[3];return!t||(t=t.replace(/@([^\s()&|!=<>]+)/g,(function(e,t){return'tryConvertStringToNumber(dynamicVariables["'+t.trim()+'"])'})),t=t.replaceAll(/(==|!=|<=|>=|<|>) ?(.*?) ?(\)|\&|\||$)/g,(function(e,t,n,r){return`${t}"${n}" ${r}`})).replaceAll('""','"').replace('"undefined"',"undefined"),vn(t,i))}))),[e,t]=function(e,t){return[e=e.replaceAll(/\!Select ?: ?([0-9]*)/g,(function(e,n){return e&&n<=t.length?(t=r(t).slice(0,n),"\x3c!--"+e+"--\x3e"):""})),t]}(e,t),function(e){if(Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++)if(!0===e[n][2])return!0}return!1}(t)&&(t=function(e){let t=[];e.forEach((function(e){e[2]&&t.push(e)})),t=r(t);var n=[];return e.forEach((function(e){e[2]?n.push(t.shift()):n.push(e)})),n}(t)),t){p=t;let n='\n<ul class="messageOptions">';const r=t.length;for(let e=0;e<r;e++){const r=t[e],i=r[0];n=n+'<li><a href="#'+r[1]+'">'+i+"</a></li>\n"}n+="</ul>",e+=n}else p=null;return e}window.useLLMpromise&&window.useLLMpromise.then((()=>{window.useLLMragContentPromise?window.useLLMragContentPromise.then((()=>{w(zt.useLLM.RAG.informations)})):w(zt.useLLM.RAG.informations)})).catch((e=>{console.error("Erreur d'accès aux données RAG : ",e)})),En.addEventListener("click",(()=>{const e=Xt.innerText;if(""!==e.trim())h(e,!0),setTimeout((()=>{C(e),s()}),100),Xt.innerText="";else{const e=new KeyboardEvent("keypress",{key:"Enter",keyCode:13,which:13});Xt.dispatchEvent(e)}})),document.addEventListener("keypress",(e=>{Xt.focus(),"Enter"===e.key?(e.preventDefault(),En.click(),s()):Xt.parentElement.parentElement.classList.contains("hideControls")&&e.preventDefault()})),Xt.focus({preventScroll:!0}),Xt.addEventListener("focus",(function(){this.classList.remove("placeholder")})),Xt.addEventListener("blur",(function(){this.classList.add("placeholder")})),Zt.addEventListener("click",(e=>function(e){const t=e.target;if("A"===t.tagName){const n=window.location.href,r=t.getAttribute("href");if(r.startsWith(n)&&window.open(r),r.startsWith("#")){e.preventDefault(),mn.lastMessageFromBot="",mn.goto="",mn.onlyIfKeywords=!1;let n=t.innerText;const i=zt.obfuscate?atob(r.replace("#","")):r;zt.useLLM.ok&&zt.useLLM.url&&zt.useLLM.model&&i.includes("!useLLM")?(n=i.replace("#","").replace("!useLLM",'<span class="hidden">!useLLM</span>').trim(),h(n,!0),C(n)):(h(n,!0),b(r.substring(1)),document.activeElement.blur(),tn&&Xt.focus()),mn.errorsCounter=0,s()}}}(e))),c=k(c[0].join("\n"),c[1]),zt.dynamicContent&&(c=wn(c,i,!1)),h(c,!1),c=c.replace(/<span class=\"unique\">.*?<\/span>/,"")}let Sn,jn="# test de Chatbot\n\nAvec programmation en modules";function Nn(t){!function(t){if(t.split("---").length>2&&t.startsWith("---"))try{const n=Ut.load(t.split("---")[1]);if(zt=n?Object.assign(zt,n):zt,!0===zt.maths&&(zt.addOns=zt.addOns?zt.addOns+",textFit":"textFit",Promise.all([i("https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"),o("https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css")])),zt.addOns){zt.addOns=zt.addOns.replace(" ","").split(",");let t=[];for(const[n,r]of Object.entries(e.addOnsDependencies))if(zt.addOns.includes(n))for(const e of r)t.push(e);zt.addOns.push(...t);for(const t of zt.addOns){const n=[],r=e.allowedAddOns[t];r&&(r.js&&n.push(i(r.js)),r.css&&n.push(o(r.css)),Promise.all(n))}}if((zt.titresRéponses||zt.responsesTitles)&&(zt.responsesTitles=zt.responsesTitles?zt.responsesTitles:zt.titresRéponses,"string"==typeof zt.responsesTitles&&(zt.responsesTitles=[zt.responsesTitles])),zt.style){const e=document.createElement("style");e.innerHTML=zt.style,document.body.appendChild(e)}if((zt.userInput||zt.clavier||zt.keyboard)&&(zt.userInput=zt.userInput?zt.userInput:zt.keyboard?zt.keyboard:zt.clavier,!1===zt.userInput&&document.body.classList.add("hideControls")),(zt.searchInContent||zt.rechercheContenu)&&(zt.searchInContent=zt.searchInContent?zt.searchInContent:zt.rechercheContenu),(zt.gestionGrosMots||zt.detectBadWords)&&(zt.detectBadWords=zt.detectBadWords?zt.detectBadWords:zt.gestionGrosMots,!0===zt.detectBadWords&&Promise.all([i("externals/leo-profanity.js"),i("externals/badWords-fr.js")]).then((()=>{Yt=window.LeoProfanity,Yt.add(badWordsFR),console.log(window)})).catch((e=>{console.error("Une erreur s'est produite lors du chargement des scripts :",e)}))),zt.favicon&&(document.getElementById("favicon").href=zt.favicon),zt.avatar){const e=`\n\t\t\t\t\t.bot-message > :first-child:before {\n\t\t\t\t\tbackground-image: url("${zt.avatar}");\n\t\t\t\t`,t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}if(zt.defaultMessage||zt.messageParDéfaut)for(e.defaultMessage=zt.defaultMessage?zt.defaultMessage:zt.messageParDéfaut;e.defaultMessage.length<5;)e.defaultMessage.push(...e.defaultMessage);if(!1===zt.footer&&document.body.classList.add("hideFooter"),zt.theme&&o(zt.theme.endsWith(".css")?"themes/"+zt.theme:"themes/"+zt.theme+".css"),(zt.dynamicContent||zt.contenuDynamique)&&(zt.dynamicContent=zt.dynamicContent?zt.dynamicContent:zt.contenuDynamique),(zt.typeWriter||zt.effetDactylo)&&(zt.typeWriter=zt.typeWriter?zt.typeWriter:zt.effetDactylo),zt.obfuscate&&(zt.obfuscate=!!zt.obfuscate),zt.bots)for(const[e,t]of Object.entries(zt.bots)){const n=t.avatar?'background-image:url("'+t.avatar+'"); ':"",r="<style>.botName-"+e+">:first-child:before {"+n+(t.cssAvatar?t.cssAvatar:"")+"} .botName-"+e+"{"+(t.cssMessage?t.cssMessage:"")+"}</style>";Promise.all([o(r)])}(zt.useLLM.ok||zt.utiliserLLM)&&(zt.useLLM=zt.utiliserLLM?zt.utiliserLLM:zt.useLLM,window.useLLMpromise=Promise.all([i("LLM/useLLM.js"),i("LLM/RAG.js")]).then((()=>{window.useLLMragContentPromise=new Promise(((e,t)=>{try{e(window.getRAGcontent(zt.useLLM.RAG.informations))}catch(e){t(e)}}))})).catch((e=>console.error(e))),zt.useLLM.ok=!0,!0===zt.useLLM.askAPIkey?zt.useLLM.apiKey=prompt("Ce chatbot peut se connecter à une IA pour enrichir les réponses proposées. Entrez votre clé API, puis cliquez sur “OK” pour pouvoir bénéficier de cette fonctionnalité. Sinon, cliquez sur “Annuler”."):zt.useLLM.apiKey=zt.useLLM.askAPIkey?zt.useLLM.askAPIkey:"")}catch(e){}}(t);let r=[],s=null,a=[],l=[],c=null;const u=/^\d{1,3}(\.|\))\s\[/,p=/^\d{1,3}\)/,d=/\`if (.*?)\`/;let f=!1,h=[],m=[],g=!1,y=t.indexOf("# ");const b=t.indexOf("## ");b>-1&&b==y-1&&(y=0);let v=t.substring(y);zt.variables&&(v=gn(v,!0));const A=v.substring(1),w=["# ","## ","### ","#### ","##### "].map((e=>A.indexOf(e))).filter((e=>e>0)),C=Math.min(...w),k=v.substring(0,C),L=k.match(/# .*/),x=L?L[0]:"Chatbot",I=x?[x.replace("# ","").trim()]:[""],M=k.indexOf(x),O=(L?k.substring(M+x.length):k.substring(M)).split("\n");for(let e of O)if(e=e.replace(/^>\s?/,"").trim(),u.test(e)){g=p.test(e);const t=e.replace(/^\d+(\.|\))\s/,"").trim();let n=t.replace(/^\[.*?\]\(/,"").replace(/\)$/,"");n=zt.obfuscate?btoa(n):n;const r=t.replace(/\]\(.*/,"").replace(/^\[/,"");m.push([r,n,g])}else h.push(e);const E=v.substring(C).split("\n");let T="";for(let e of E)if(n(e,zt.responsesTitles))s&&r.push([s,a,l,c]),s=e.replace(n(e,zt.responsesTitles),"").trim(),a=[],c=null,f=!1,l=[];else if(e.startsWith("- ")&&!f)a.push(e.replace("- ","").trim());else if(zt.dynamicContent&&d.test(e))T=e.match(d)[1]?e.match(d)[1]:"",l.push(e+"\n"),f=!0;else if(zt.dynamicContent&&e.includes("`endif`"))T="",l.push(e+"\n"),f=!0;else if(u.test(e)){f=!1,c||(c=[]),g=p.test(e);const t=e.replace(/^\d+(\.|\))\s/,"").trim();let n=t.replace(/^\[.*?\]\(/,"").replace(/\)$/,"");n=zt.obfuscate?btoa(n):n;const r=t.replace(/\]\(.*/,"").replace(/^\[/,"");c.push([r,n,g,T])}else e.length>0&&!e.startsWith("# ")&&(e=e.replaceAll(/\[(.*?)\]\((#.*?)\)/g,'<a href="$2">$1</a>'),l.push(e),f=!0);r.push([s,a,l,c]);const S=[h,m];return r.push(S),r.push(I),r}document.getElementById("controls"),function(){const t=function(t){if(""!==t){let n=!0;const r=e.shortcuts.find((e=>e[0]==t));if(r)return t=r[1];if(e.secureMode){const n=e.authorizedChatbots.find((e=>e==t));if(!n)return"";t=n}t.includes(".forge")&&(n=!1),t.startsWith("https://github.com")&&(n=!1,t=(t=t.replace("https://github.com","https://raw.githubusercontent.com")).replace("/blob/","/")),(t.startsWith("https://codimd")||t.includes("hedgedoc")||t.includes("digipage"))&&(n=!1,t=-1===(t=t.replace("?edit","").replace("?both","").replace("?view","").replace(/#$/,"").replace(/\/$/,"")).indexOf("download")?t+"/download":t),!t.includes("framapad")&&!t.includes("digidoc")||t.endsWith("/export/txt")||(n=!1,t=t.replace(/\?.*/,"")+"/export/txt"),t=n?e.corsProxy+t:t}return t}(window.location.hash.substring(1).replace(/\?.*/,""));if(""!==t)if(Array.isArray(t)){const e=t.map((e=>fetch(e).then((e=>e.text()))));Promise.all(e).then((e=>{jn=e.join("\n"),Sn=Nn(jn),Tn(Sn)})).catch((e=>console.error(e)))}else fetch(t).then((e=>e.text())).then((e=>{jn=e,Sn=Nn(jn),Tn(Sn)})).catch((e=>console.error(e)));else Tn(Nn(jn))}()}();